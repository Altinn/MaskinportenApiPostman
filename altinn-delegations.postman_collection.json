{
	"info": {
		"_postman_id": "f6619dd1-d6a5-4adb-b5e3-4f762de15251",
		"name": "Maskinporten Delegeringskilde API",
		"description": "API som delegeringskilder må implementere for integrasjon med Maskinportens tilgangskontroll.\n\nBenytter seg av et pre-request script som henter token via https://github.com/elsand/MaskinportenTokenGenerator\n\nContact Support:\n Name: Bjørn Dybvik Langfors\n Email: bdl@brreg.no",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Delegation Schemes",
			"item": [
				{
					"name": "Opprett og list ut alle",
					"item": [
						{
							"name": "Opprett et delegeringsoppsett",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "7cc50db1-2ece-4294-a423-f2299e015269",
										"exec": [
											"pm.test(\"Successful POST request\", function () {",
											"    pm.expect(pm.response.code).to.be.oneOf([201]);",
											"});",
											"",
											"pm.test(\"Body contains GUID\", function () {",
											"    pm.response.to.have.body(/^\"[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}\"$/);",
											"});",
											"",
											"pm.environment.set(\"DefaultDelegationSchemeId\", pm.response.json());"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"owner_org\": \"974760673\",\r\n    \"scopes\": [\r\n        \"altinn:bjorn/theworld.read\",\r\n        \"altinn:bjorn/theworld.write\"\r\n    ],\r\n    \"title\": [\r\n        {\r\n            \"code\": \"nb_NO\",\r\n            \"value\": \"Bjørn 1\"\r\n        }\r\n    ],\r\n    \"description\": [\r\n        {\r\n            \"code\": \"nb_NO\",\r\n            \"value\": \"Bla bla bla bla bla\"\r\n        }\r\n    ],\r\n    \"default_language\": \"nb_NO\"\r\n}\r\n"
								},
								"url": {
									"raw": "{{baseUrl}}/delegationSchemes",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegationSchemes"
									]
								},
								"description": "Lager et nytt delegeringsoppsett."
							},
							"response": [
								{
									"name": "Ugyldig delegeringsoppsett. Se respons for nærmere forklaring.",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner_org\": \"991825827\",\n    \"scopes\": [\n        \"difi:user/kontaktinfo.read\",\n        \"difi:user/varsling.read\"\n    ],\n    \"default_language\": \"nb_NO\",\n    \"title\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Full access to the Contact and Reservation Register\"\n        }\n    ],\n    \"description\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Gir anledning til å lese og endre data i KRR\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Gjer høve til å lesa og endra data i KRR\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Allows you to read and change data in the Contact and Reservation Register\"\n        }\n    ],\n    \"delegation_source\": \"altinn\",\n    \"delegation_source_config\": [\n        {\n            \"key\": \"RequiresRoles\",\n            \"value\": \"DAGL,LEDE\"\n        }\n    ]\n}"
										},
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes"
											]
										}
									},
									"status": "Bad Request",
									"code": 400,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "{\n \"error_code\": 4030,\n \"error_description\": \"The delegation scheme is invalid: one or more of the role codes supplied are invalid\"\n}"
								},
								{
									"name": "Delegeringsoppsettet er opprettet.",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner_org\": \"991825827\",\n    \"scopes\": [\n        \"difi:user/kontaktinfo.read\",\n        \"difi:user/varsling.read\"\n    ],\n    \"default_language\": \"nb_NO\",\n    \"title\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Full access to the Contact and Reservation Register\"\n        }\n    ],\n    \"description\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Gir anledning til å lese og endre data i KRR\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Gjer høve til å lesa og endra data i KRR\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Allows you to read and change data in the Contact and Reservation Register\"\n        }\n    ],\n    \"delegation_source\": \"altinn\",\n    \"delegation_source_config\": [\n        {\n            \"key\": \"RequiresRoles\",\n            \"value\": \"DAGL,LEDE\"\n        }\n    ]\n}"
										},
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "\"<uuid>\""
								},
								{
									"name": "Ingen tilgang til å opprette oppgitt delegeringsoppsett. Se respons for nærmere forklaring.",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner_org\": \"991825827\",\n    \"scopes\": [\n        \"difi:user/kontaktinfo.read\",\n        \"difi:user/varsling.read\"\n    ],\n    \"default_language\": \"nb_NO\",\n    \"title\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Full access to the Contact and Reservation Register\"\n        }\n    ],\n    \"description\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Gir anledning til å lese og endre data i KRR\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Gjer høve til å lesa og endra data i KRR\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Allows you to read and change data in the Contact and Reservation Register\"\n        }\n    ],\n    \"delegation_source\": \"altinn\",\n    \"delegation_source_config\": [\n        {\n            \"key\": \"RequiresRoles\",\n            \"value\": \"DAGL,LEDE\"\n        }\n    ]\n}"
										},
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes"
											]
										}
									},
									"status": "Forbidden",
									"code": 403,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "{\n \"error_code\": 4031,\n \"error_description\": \"You do not have access to create a schema with one or more of the supplied scopes\"\n}"
								}
							]
						},
						{
							"name": "Lister ut alle delegeringsoppsett",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "e7cb9448-c4b8-4944-a7e9-106db5d6e4bd",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"At least one delegation scheme is registered\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData).to.not.be.empty;",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/delegationSchemes?",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegationSchemes"
									],
									"query": [
										{
											"key": "owner_orgno",
											"value": "810419962",
											"disabled": true
										}
									]
								},
								"description": "Returnerer en liste over alle delegeringsoppsett, valgfritt filtrert på organisasjonsnummer"
							},
							"response": [
								{
									"name": "Returnerer en liste av delegeringsoppsett",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes?owner_orgno=<string>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes"
											],
											"query": [
												{
													"key": "owner_orgno",
													"value": "<string>"
												}
											]
										}
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "[\n {\n  \"scopes\": [\n   \"<string>\",\n   \"<string>\"\n  ],\n  \"title\": [\n   {\n    \"code\": \"<string>\",\n    \"value\": \"<string>\"\n   },\n   {\n    \"code\": \"<string>\",\n    \"value\": \"<string>\"\n   }\n  ],\n  \"description\": [\n   {\n    \"code\": \"<string>\",\n    \"value\": \"<string>\"\n   },\n   {\n    \"code\": \"<string>\",\n    \"value\": \"<string>\"\n   }\n  ],\n  \"delegation_source\": \"<string>\",\n  \"delegation_scheme_id\": \"<uuid>\",\n  \"owner_org\": \"<string>\",\n  \"default_language\": \"<string>\",\n  \"delegation_source_config\": [\n   {\n    \"key\": \"<string>\",\n    \"value\": \"<string>\"\n   },\n   {\n    \"key\": \"<string>\",\n    \"value\": \"<string>\"\n   }\n  ],\n  \"created\": \"<dateTime>\",\n  \"last_changed\": \"<dateTime>\"\n },\n {\n  \"scopes\": [\n   \"<string>\",\n   \"<string>\"\n  ],\n  \"title\": [\n   {\n    \"code\": \"<string>\",\n    \"value\": \"<string>\"\n   },\n   {\n    \"code\": \"<string>\",\n    \"value\": \"<string>\"\n   }\n  ],\n  \"description\": [\n   {\n    \"code\": \"<string>\",\n    \"value\": \"<string>\"\n   },\n   {\n    \"code\": \"<string>\",\n    \"value\": \"<string>\"\n   }\n  ],\n  \"delegation_source\": \"<string>\",\n  \"delegation_scheme_id\": \"<uuid>\",\n  \"owner_org\": \"<string>\",\n  \"default_language\": \"<string>\",\n  \"delegation_source_config\": [\n   {\n    \"key\": \"<string>\",\n    \"value\": \"<string>\"\n   },\n   {\n    \"key\": \"<string>\",\n    \"value\": \"<string>\"\n   }\n  ],\n  \"created\": \"<dateTime>\",\n  \"last_changed\": \"<dateTime>\"\n }\n]"
								},
								{
									"name": "Oppgitt organisasjonsnummer finnes ikke eller er ugyldig",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes?owner_orgno=<string>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes"
											],
											"query": [
												{
													"key": "owner_orgno",
													"value": "<string>"
												}
											]
										}
									},
									"status": "Bad Request",
									"code": 400,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "{\n \"error_code\": 4001,\n \"error_description\": \"Supplied organization number is invalid or does not exist\"\n}"
								},
								{
									"name": "Ingen tilgang til å hente ut liste over delegeringsoppsett.",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes?owner_orgno=<string>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes"
											],
											"query": [
												{
													"key": "owner_orgno",
													"value": "<string>"
												}
											]
										}
									},
									"status": "Forbidden",
									"code": 403,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								}
							]
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2e018df0-cbb3-4a45-b6cb-860ec92cc256",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "6ed69a97-624b-4749-bd87-bb11d4204c8b",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Operasjoner på enkelt-DS",
					"item": [
						{
							"name": "Operasjoner for admin. av scopes",
							"item": [
								{
									"name": "Hent liste over alle scopes for et delegeringsoppsett",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9a673468-e94b-4dcc-8fe6-9adce8d2e003",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"Three scopes for this delegation scheme\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData).to.have.lengthOf(3);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/:delegationSchemeId/scopes",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												":delegationSchemeId",
												"scopes"
											],
											"variable": [
												{
													"key": "delegationSchemeId",
													"value": "{{DefaultDelegationSchemeId}}",
													"description": "ID på delegeringsoppsett"
												}
											]
										}
									},
									"response": [
										{
											"name": "Liste av scopes",
											"originalRequest": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes"
													]
												}
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Type",
													"value": "application/json"
												}
											],
											"cookie": [],
											"body": "[\n \"<string>\",\n \"<string>\"\n]"
										},
										{
											"name": "Oppgitt delegeringoppsett-ID finnes ikke",
											"originalRequest": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes"
													]
												}
											},
											"status": "Not Found",
											"code": 404,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										},
										{
											"name": "Ikke tilgang til å hente oppgitt delegeringsoppsett.",
											"originalRequest": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes"
													]
												}
											},
											"status": "Forbidden",
											"code": 403,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										}
									]
								},
								{
									"name": "Knytt oppgitt scope med oppgitt delegeringsoppsett",
									"request": {
										"method": "POST",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/:delegationSchemeId/scopes/?scope=altinn:foo/bar",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												":delegationSchemeId",
												"scopes",
												""
											],
											"query": [
												{
													"key": "scope",
													"value": "altinn:foo/bar"
												}
											],
											"variable": [
												{
													"description": "ID for delegeringsoppsett",
													"key": "delegationSchemeId",
													"value": "{{DefaultDelegationSchemeId}}"
												}
											]
										}
									},
									"response": [
										{
											"name": "Delegeringsoppsett ikke funnet",
											"originalRequest": {
												"method": "PUT",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes/:scope",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes",
														":scope"
													],
													"variable": [
														{
															"key": "scope"
														}
													]
												}
											},
											"status": "Not Found",
											"code": 404,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										},
										{
											"name": "Scope lagt til delegeringsoppsett",
											"originalRequest": {
												"method": "PUT",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes/:scope",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes",
														":scope"
													],
													"variable": [
														{
															"key": "scope"
														}
													]
												}
											},
											"status": "No Content",
											"code": 204,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										},
										{
											"name": "Ikke tilgang til å hente oppgitt delegeringsoppsett.",
											"originalRequest": {
												"method": "PUT",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes/:scope",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes",
														":scope"
													],
													"variable": [
														{
															"key": "scope"
														}
													]
												}
											},
											"status": "Forbidden",
											"code": 403,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										},
										{
											"name": "Ugyldig scope",
											"originalRequest": {
												"method": "PUT",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes/:scope",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes",
														":scope"
													],
													"variable": [
														{
															"key": "scope"
														}
													]
												}
											},
											"status": "Bad Request",
											"code": 400,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										}
									]
								},
								{
									"name": "Erstatt eksisterende liste av scopes med ny liste med scopes",
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\r\n    \"altinn:serviceowner/authorization\",\r\n    \"altinn:serviceowner/organizations\",\r\n    \"altinn:serviceowner/events\"\r\n]"
										},
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/:delegationSchemeId/scopes",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												":delegationSchemeId",
												"scopes"
											],
											"variable": [
												{
													"description": "ID for delegeringsoppsett",
													"key": "delegationSchemeId",
													"value": "{{DefaultDelegationSchemeId}}"
												}
											]
										}
									},
									"response": [
										{
											"name": "Ugyldig liste med scopes",
											"originalRequest": {
												"method": "PUT",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "[\n    \"<string>\",\n    \"<string>\"\n]"
												},
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes"
													]
												}
											},
											"status": "Bad Request",
											"code": 400,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Type",
													"value": "application/json"
												}
											],
											"cookie": [],
											"body": "{\n \"error_description\": \"<string>\",\n \"error_code\": \"<integer>\"\n}"
										},
										{
											"name": "Listen med scopes ble oppdatert",
											"originalRequest": {
												"method": "PUT",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "[\n    \"<string>\",\n    \"<string>\"\n]"
												},
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes"
													]
												}
											},
											"status": "No Content",
											"code": 204,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										},
										{
											"name": "Ikke tilgang til å oppdatere oppgitt delegeringsoppsett.",
											"originalRequest": {
												"method": "PUT",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "[\n    \"<string>\",\n    \"<string>\"\n]"
												},
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes"
													]
												}
											},
											"status": "Forbidden",
											"code": 403,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										}
									]
								},
								{
									"name": "Slett oppgitt scope fra liste av scopes for oppgitt delegeringsoppsett",
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/:delegationSchemeId/scopes/?scope=altinn:serviceowner/events",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												":delegationSchemeId",
												"scopes",
												""
											],
											"query": [
												{
													"key": "scope",
													"value": "altinn:serviceowner/events"
												}
											],
											"variable": [
												{
													"description": "ID for delegeringsoppsett",
													"key": "delegationSchemeId",
													"value": "{{DefaultDelegationSchemeId}}"
												}
											]
										}
									},
									"response": [
										{
											"name": "Oppgitt scope ikke funnet i listen av scopes for gitt delegeringsoppsett",
											"originalRequest": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes/:scope",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes",
														":scope"
													],
													"variable": [
														{
															"key": "scope"
														}
													]
												}
											},
											"status": "Not Found",
											"code": 404,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										},
										{
											"name": "Ikke tilgang til å slette scope fra oppgitt delegeringsoppsett.",
											"originalRequest": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes/:scope",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes",
														":scope"
													],
													"variable": [
														{
															"key": "scope"
														}
													]
												}
											},
											"status": "Forbidden",
											"code": 403,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										},
										{
											"name": "Scope fjernet fra listen",
											"originalRequest": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/delegationSchemes/<uuid>/scopes/:scope",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"delegationSchemes",
														"<uuid>",
														"scopes",
														":scope"
													],
													"variable": [
														{
															"key": "scope"
														}
													]
												}
											},
											"status": "No Content",
											"code": 204,
											"_postman_previewlanguage": "text",
											"header": [
												{
													"key": "Content-Type",
													"value": "text/plain"
												}
											],
											"cookie": [],
											"body": ""
										}
									]
								}
							],
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "1d792813-9240-406e-b87a-9b66b08d34bb",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "8085287c-d866-48ac-93fc-4f0aed0af719",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Hent et delegeringsoppsett",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "bfb7fd8e-7eba-4d86-9827-75aef7276468",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Returns the correct DS\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.delegation_scheme_id).to.eql(pm.environment.get(\"DefaultDelegationSchemeId\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/delegationSchemes/:delegationSchemeId",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegationSchemes",
										":delegationSchemeId"
									],
									"variable": [
										{
											"key": "delegationSchemeId",
											"value": "{{DefaultDelegationSchemeId}}"
										}
									]
								},
								"description": "Hent informasjon om et enkelt delegeringsoppsett."
							},
							"response": [
								{
									"name": "Returnerer et delegeringsoppsett som definert av `DelegationScheme`.",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "{\n \"scopes\": [\n  \"<string>\",\n  \"<string>\"\n ],\n \"title\": [\n  {\n   \"code\": \"<string>\",\n   \"value\": \"<string>\"\n  },\n  {\n   \"code\": \"<string>\",\n   \"value\": \"<string>\"\n  }\n ],\n \"description\": [\n  {\n   \"code\": \"<string>\",\n   \"value\": \"<string>\"\n  },\n  {\n   \"code\": \"<string>\",\n   \"value\": \"<string>\"\n  }\n ],\n \"delegation_source\": \"<string>\",\n \"delegation_scheme_id\": \"<uuid>\",\n \"owner_org\": \"<string>\",\n \"default_language\": \"<string>\",\n \"delegation_source_config\": [\n  {\n   \"key\": \"<string>\",\n   \"value\": \"<string>\"\n  },\n  {\n   \"key\": \"<string>\",\n   \"value\": \"<string>\"\n  }\n ],\n \"created\": \"<dateTime>\",\n \"last_changed\": \"<dateTime>\"\n}"
								},
								{
									"name": "Ikke tilgang til å hente oppgitt delegeringsoppsett.",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "Forbidden",
									"code": 403,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								},
								{
									"name": "Forespurte delegeringsoppsett ble ikke funnet.",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "Not Found",
									"code": 404,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								}
							]
						},
						{
							"name": "Oppdaterer et delegeringsoppsett",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "39703a7a-9f5b-4ff9-a6ca-b52c88e7697c",
										"exec": [
											"pm.test(\"Status code is 501\", function () {",
											"    pm.response.to.have.status(501);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"owner_org\": \"{{DefaultOwnerOrgNo}}\",\n    \"scopes\": [\n        \"difi:user/kontaktinfo.read\",\n        \"difi:user/varsling.read\"\n    ],\n    \"default_language\": \"nb_NO\",\n    \"title\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Full access to the Contact and Reservation Register\"\n        }\n    ],\n    \"description\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Gir anledning til å lese og endre data i KRR\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Gjer høve til å lesa og endra data i KRR\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Allows you to read and change data in the Contact and Reservation Register\"\n        }\n    ],\n    \"delegation_source\": \"altinn\",\n    \"delegation_source_config\": [\n        {\n            \"key\": \"RequiresRoles\",\n            \"value\": \"DAGL,LEDE\"\n        }\n    ]\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/delegationSchemes/:delegationSchemeId",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegationSchemes",
										":delegationSchemeId"
									],
									"variable": [
										{
											"key": "delegationSchemeId",
											"value": "{{DefaultDelegationSchemeId}}",
											"description": "ID for delegeringsoppsett"
										}
									]
								},
								"description": "Oppdaterer et delegeringsoppsett."
							},
							"response": [
								{
									"name": "Forespurte delegeringsoppsett ble ikke funnet.",
									"originalRequest": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner_org\": \"991825827\",\n    \"scopes\": [\n        \"difi:user/kontaktinfo.read\",\n        \"difi:user/varsling.read\"\n    ],\n    \"default_language\": \"nb_NO\",\n    \"title\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Full access to the Contact and Reservation Register\"\n        }\n    ],\n    \"description\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Gir anledning til å lese og endre data i KRR\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Gjer høve til å lesa og endra data i KRR\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Allows you to read and change data in the Contact and Reservation Register\"\n        }\n    ],\n    \"delegation_source\": \"altinn\",\n    \"delegation_source_config\": [\n        {\n            \"key\": \"RequiresRoles\",\n            \"value\": \"DAGL,LEDE\"\n        }\n    ]\n}"
										},
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "Not Found",
									"code": 404,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								},
								{
									"name": "Delegeringsoppsettet ble oppdatert.",
									"originalRequest": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner_org\": \"991825827\",\n    \"scopes\": [\n        \"difi:user/kontaktinfo.read\",\n        \"difi:user/varsling.read\"\n    ],\n    \"default_language\": \"nb_NO\",\n    \"title\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Full access to the Contact and Reservation Register\"\n        }\n    ],\n    \"description\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Gir anledning til å lese og endre data i KRR\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Gjer høve til å lesa og endra data i KRR\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Allows you to read and change data in the Contact and Reservation Register\"\n        }\n    ],\n    \"delegation_source\": \"altinn\",\n    \"delegation_source_config\": [\n        {\n            \"key\": \"RequiresRoles\",\n            \"value\": \"DAGL,LEDE\"\n        }\n    ]\n}"
										},
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "Accepted",
									"code": 202,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								},
								{
									"name": "Ikke tilgang til å oppdatere delegeringsoppsettet. Nærmere forklaring ligger i response body.",
									"originalRequest": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner_org\": \"991825827\",\n    \"scopes\": [\n        \"difi:user/kontaktinfo.read\",\n        \"difi:user/varsling.read\"\n    ],\n    \"default_language\": \"nb_NO\",\n    \"title\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Full access to the Contact and Reservation Register\"\n        }\n    ],\n    \"description\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Gir anledning til å lese og endre data i KRR\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Gjer høve til å lesa og endra data i KRR\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Allows you to read and change data in the Contact and Reservation Register\"\n        }\n    ],\n    \"delegation_source\": \"altinn\",\n    \"delegation_source_config\": [\n        {\n            \"key\": \"RequiresRoles\",\n            \"value\": \"DAGL,LEDE\"\n        }\n    ]\n}"
										},
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "Forbidden",
									"code": 403,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "{\n \"error_description\": \"<string>\",\n \"error_code\": \"<integer>\"\n}"
								},
								{
									"name": "Ugyldig delegeringsoppsett. Se respons for nærmere forklaring.",
									"originalRequest": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner_org\": \"991825827\",\n    \"scopes\": [\n        \"difi:user/kontaktinfo.read\",\n        \"difi:user/varsling.read\"\n    ],\n    \"default_language\": \"nb_NO\",\n    \"title\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Full tilgang til Kontakt- og Reservasjonsregisteret\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Full access to the Contact and Reservation Register\"\n        }\n    ],\n    \"description\": [\n        {\n            \"code\": \"nb_NO\",\n            \"value\": \"Gir anledning til å lese og endre data i KRR\"\n        },\n        {\n            \"code\": \"nn_NO\",\n            \"value\": \"Gjer høve til å lesa og endra data i KRR\"\n        },\n        {\n            \"code\": \"en_GB\",\n            \"value\": \"Allows you to read and change data in the Contact and Reservation Register\"\n        }\n    ],\n    \"delegation_source\": \"altinn\",\n    \"delegation_source_config\": [\n        {\n            \"key\": \"RequiresRoles\",\n            \"value\": \"DAGL,LEDE\"\n        }\n    ]\n}"
										},
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "Bad Request",
									"code": 400,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "{\n \"error_description\": \"<string>\",\n \"error_code\": \"<integer>\"\n}"
								}
							]
						},
						{
							"name": "Slett et delegeringsoppsett",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "a2a258e1-f964-4d95-b435-392a7e0915bc",
										"exec": [
											"pm.test(\"Status code is 204\", function () {",
											"    pm.response.to.have.status(204);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/delegationSchemes/:delegationSchemeId",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegationSchemes",
										":delegationSchemeId"
									],
									"variable": [
										{
											"key": "delegationSchemeId",
											"value": "{{DefaultDelegationSchemeId}}",
											"description": "ID for delegeringsoppsett"
										}
									]
								},
								"description": "Sletter et eksisterende delegeringsoppsett, hvis delegeringsskilden tillater det."
							},
							"response": [
								{
									"name": "Oppsettet ble slettet.",
									"originalRequest": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "No Content",
									"code": 204,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								},
								{
									"name": "Kunne ikke slette delegeringsoppsettet. Nærmere forklaring ligger i response body.",
									"originalRequest": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "Forbidden",
									"code": 403,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										}
									],
									"cookie": [],
									"body": "{\n \"error_description\": \"<string>\",\n \"error_code\": \"<integer>\"\n}"
								},
								{
									"name": "Forespurte delegeringsoppsett ble ikke funnet.",
									"originalRequest": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/delegationSchemes/<uuid>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"delegationSchemes",
												"<uuid>"
											]
										}
									},
									"status": "Not Found",
									"code": 404,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								}
							]
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f9eda62f-de85-46da-b7ba-7cc99b3b82b2",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "338fee27-a241-4c25-acb5-9bcf97d12130",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "22158a81-bd21-4de2-9bd1-a08314f1dd23",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "1fa7e83b-27eb-481d-b2cd-5b93632ba5f5",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Delegations",
			"item": [
				{
					"name": "Liste over delegeringer som er gjort på et scope",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2166884a-7138-439b-8732-5882e22f95ff",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/delegations?scope={{DefaultScope}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"delegations"
							],
							"query": [
								{
									"key": "scope",
									"value": "{{DefaultScope}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "Liste over alle delegeringer som er gjort på dette scopet.",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/delegations?scope={\"value\":\"reference #/components/schemas/Scope not found in the api spec\"}&consumer_org=<string>&supplier_org=<string>",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegations"
									],
									"query": [
										{
											"key": "scope",
											"value": "{\"value\":\"reference "
										}
									],
									"hash": "/components/schemas/Scope not found in the api spec\"}&consumer_org=<string>&supplier_org=<string>"
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "[\n {\n  \"consumer_org\": \"<string>\",\n  \"supplier_org\": \"<string>\",\n  \"delegation_scheme_id\": \"<uuid>\",\n  \"created\": \"<dateTime>\",\n  \"scopes\": [\n   \"<string>\",\n   \"<string>\"\n  ]\n },\n {\n  \"consumer_org\": \"<string>\",\n  \"supplier_org\": \"<string>\",\n  \"delegation_scheme_id\": \"<uuid>\",\n  \"created\": \"<dateTime>\",\n  \"scopes\": [\n   \"<string>\",\n   \"<string>\"\n  ]\n }\n]"
						},
						{
							"name": "Ikke tilgang til å hente ut delegeringer",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/delegations?scope={\"value\":\"reference #/components/schemas/Scope not found in the api spec\"}&consumer_org=<string>&supplier_org=<string>",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegations"
									],
									"query": [
										{
											"key": "scope",
											"value": "{\"value\":\"reference "
										}
									],
									"hash": "/components/schemas/Scope not found in the api spec\"}&consumer_org=<string>&supplier_org=<string>"
								}
							},
							"status": "Forbidden",
							"code": 403,
							"_postman_previewlanguage": "text",
							"header": [
								{
									"key": "Content-Type",
									"value": "text/plain"
								}
							],
							"cookie": [],
							"body": ""
						}
					]
				},
				{
					"name": "Liste over delegeringer som er gjort på et scope mellom to parter",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2166884a-7138-439b-8732-5882e22f95ff",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/delegations?scope={{DefaultScope}}&consumer_org={{DefaultConsumerOrg}}&supplier_org={{DefaultSupplierOrg}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"delegations"
							],
							"query": [
								{
									"key": "scope",
									"value": "{{DefaultScope}}"
								},
								{
									"key": "consumer_org",
									"value": "{{DefaultConsumerOrg}}"
								},
								{
									"key": "supplier_org",
									"value": "{{DefaultSupplierOrg}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "Liste over alle delegeringer som er gjort på dette scopet.",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/delegations?scope={\"value\":\"reference #/components/schemas/Scope not found in the api spec\"}&consumer_org=<string>&supplier_org=<string>",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegations"
									],
									"query": [
										{
											"key": "scope",
											"value": "{\"value\":\"reference "
										}
									],
									"hash": "/components/schemas/Scope not found in the api spec\"}&consumer_org=<string>&supplier_org=<string>"
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "[\n {\n  \"consumer_org\": \"<string>\",\n  \"supplier_org\": \"<string>\",\n  \"delegation_scheme_id\": \"<uuid>\",\n  \"created\": \"<dateTime>\",\n  \"scopes\": [\n   \"<string>\",\n   \"<string>\"\n  ]\n },\n {\n  \"consumer_org\": \"<string>\",\n  \"supplier_org\": \"<string>\",\n  \"delegation_scheme_id\": \"<uuid>\",\n  \"created\": \"<dateTime>\",\n  \"scopes\": [\n   \"<string>\",\n   \"<string>\"\n  ]\n }\n]"
						},
						{
							"name": "Ikke tilgang til å hente ut delegeringer",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/delegations?scope={\"value\":\"reference #/components/schemas/Scope not found in the api spec\"}&consumer_org=<string>&supplier_org=<string>",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"delegations"
									],
									"query": [
										{
											"key": "scope",
											"value": "{\"value\":\"reference "
										}
									],
									"hash": "/components/schemas/Scope not found in the api spec\"}&consumer_org=<string>&supplier_org=<string>"
								}
							},
							"status": "Forbidden",
							"code": 403,
							"_postman_previewlanguage": "text",
							"header": [
								{
									"key": "Content-Type",
									"value": "text/plain"
								}
							],
							"cookie": [],
							"body": ""
						}
					]
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Test operations",
			"item": [
				{
					"name": "authtest1",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b28bb68b-c9ed-4b3a-8ecf-31c869f6b807",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/authtest1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"authtest1"
							]
						}
					},
					"response": []
				},
				{
					"name": "authtest2",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "71d0628b-d085-4f40-8612-e916659cd5d7",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/authtest2",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"authtest2"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{accessToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "2a79582c-1a4a-4585-96a7-d9710a82d01c",
				"type": "text/javascript",
				"exec": [
					"var accessToken = pm.environment.get(\"accessToken\");",
					"var accesTokenExpires = pm.environment.get(\"accesTokenExpires\");",
					"var accesTokenExpires = pm.environment.get(\"accesTokenExpires\");",
					"var alwaysRefresh = pm.environment.get('alwaysRefreshToken') === 'true';",
					"",
					"if (alwaysRefresh || !accessToken || !accesTokenExpires || new Date() > new Date(accesTokenExpires)) {",
					"    console.log(\"Access token not set or expired.\");",
					"    console.log(\"Token set? \" + (accessToken ? 'Yes' : 'No'));",
					"    console.log(\"Expires set? \" + (accesTokenExpires ? 'Yes, ' + accesTokenExpires : 'No'));",
					"    console.log(\"Always refresh? \" + (alwaysRefresh ? 'Yes' : 'No'));",
					"    ",
					"    pm.sendRequest(\"http://devenv.altinn.no:17823/\", function (err, response) {",
					"        var json = response.json();",
					"        if (typeof json.access_token !== \"undefined\") {",
					"            pm.environment.set(\"accessToken\", json.access_token);",
					"            pm.environment.set(\"scopes\", json.scope);",
					"            pm.environment.set(\"accesTokenExpires\", new Date((new Date()).getTime() + parseInt(json.expires_in + \"000\")).toUTCString());",
					"            console.log(\"New access token received, expires \" +  pm.environment.get(\"accesTokenExpires\"));",
					"            console.log(\"Scopes: \" + json.scope);",
					"        }",
					"        else {",
					"            console.error(\"Failed getting token\", json);",
					"        }",
					"    });",
					"}",
					"else {",
					"    console.log(\"Access token still valid until \" + accesTokenExpires);",
					"}",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "a477b3c2-f7f1-4bf1-a398-f08c0e4deba3",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}